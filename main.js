(()=>{"use strict";const e=()=>{const e=document.querySelector("#projects-container"),t=document.createElement("div");t.id="add-projects",e.appendChild(t);const n=document.createElement("div");n.id="add-button",n.textContent="+",t.appendChild(n);const o=document.createElement("div");o.id="add-project-text",o.textContent="Add Project",t.appendChild(o)},t=()=>{const e=document.querySelector("#project-view-container"),t=document.createElement("div");t.id="add-tasks",e.appendChild(t);const n=document.createElement("div");n.id="add-button",n.textContent="+",t.appendChild(n);const o=document.createElement("div");o.id="add-project-text",o.textContent="Add Task",t.appendChild(o)},n=e=>{const t=document.querySelector("#project-list"),n=document.createElement("div");n.id="project-box",t.appendChild(n);const o=document.createElement("li");o.classList.add("project"),o.textContent=e,o.id=e,n.appendChild(o);const d=document.createElement("div");d.classList.add("remove-project"),d.id=e,d.textContent="x",n.appendChild(d)};class o{constructor(e){this.title=e}setTitle(e){this.title=e}}const d=(e,t)=>{const n=document.querySelector("#todo-box"),o=document.createElement("div");o.id="todo-item",n.appendChild(o);const d=document.createElement("li");d.id="todo-name",d.textContent=e,o.appendChild(d);const c=document.createElement("input");c.type="date",c.id=e,c.classList.add("todo-date"),c.value=t,o.appendChild(c);const i=document.createElement("div");i.id=e,i.classList.add("todo-delete"),i.textContent="x",o.appendChild(i)},c=e=>{const t=document.querySelector("#main-content"),n=document.createElement("div");n.id="project-view-container",t.appendChild(n);const o=document.createElement("div");o.id="project-title",o.textContent=e,n.appendChild(o);const d=document.createElement("div");d.id="todo-box",n.appendChild(d)};class i{constructor(e,t,n){this.task=e,this.dueDate=t,this.project=n}setTitle(e){this.task=e}setDueDate(e){this.dueDate=e}}const l=e=>{window.localStorage.setItem("todos",JSON.stringify(e))},r=()=>JSON.parse(window.localStorage.getItem("todos")),s=e=>{window.localStorage.setItem("projects",JSON.stringify(e))},a=()=>JSON.parse(window.localStorage.getItem("projects"));(()=>{const t=document.querySelector("#container"),n=document.createElement("div");n.id="header",n.textContent="Todo List",t.appendChild(n);const o=document.createElement("div");o.id="content",t.appendChild(o);const d=document.createElement("div");d.id="footer",d.textContent="Copyright Â© 2021 SamuelBrook",t.appendChild(d);const c=document.createElement("div");c.id="sidebar",o.appendChild(c);const i=document.createElement("div");i.id="main-content",o.appendChild(i);const l=document.createElement("div");l.id="projects-container",c.appendChild(l);const r=document.createElement("div");r.id="projects-header",r.textContent="Projects",l.appendChild(r);const s=document.createElement("ul");s.id="project-list",l.appendChild(s),e()})(),(()=>{let p=!1,m=!0,u=a(),h=r();console.log(h);const C=new o("Create projects here"),v=new i("Add tasks here",0,"Create projects here");(u.length<1||null===u)&&(u.push(C),s(u)),(h.length<1||null===h)&&(h.push(v),l(h));for(let e=0;e<u.length;e++)n(u[e].title);const E=()=>{document.querySelector("#add-projects").addEventListener("click",(()=>{p=!1,document.querySelector("#add-projects").remove(),(()=>{const e=document.querySelector("#projects-container"),t=document.createElement("input");t.id="project-input",t.type="text",t.focus(),e.appendChild(t)})()}))};E(),document.addEventListener("keydown",(t=>{if(13===t.keyCode&&!1===p){console.log("project"),u=a();const t=document.querySelector("#project-input");let d=t.value;d=new o(d),t.remove(),n(d.title),e(),E(),m=!1,u.push(d),s(u)}}));const j=()=>{document.querySelector("#add-tasks").addEventListener("click",(()=>{document.querySelector("#add-tasks").remove(),(()=>{const e=document.querySelector("#main-content"),t=document.createElement("input");t.id="task-input",e.appendChild(t)})()}))};document.querySelector("#project-list").addEventListener("click",(e=>{const t=e.target;if(t.classList.contains("remove-project")){u=a();for(let e=0;e<u.length;e++)if(t.id===u[e].title){h=r();for(let t=0;t<h.length;t++)u[e].title===h[t].project&&h.splice(t,1);u.splice(e,1),t.parentElement.remove()}l(h),s(u),console.log(h),console.log(u)}})),document.querySelector("#project-list").addEventListener("click",(e=>{const n=e.target;if(n.matches("li")){if(!0===m){let e=n.textContent;c(e),p=!0}else{(()=>{const e=document.querySelector("#main-content");e.hasChildNodes()&&e.removeChild(e.childNodes[0])})();let e=n.textContent;c(e),p=!0}h=r();let e=[];for(let t=0;t<h.length;t++)h[t].project===n.id&&e.push(h[t]);for(let t=0;t<e.length;t++)d(e[t].task,e[t].dueDate);t(),j(),m=!1,document.querySelector("#main-content").addEventListener("input",(e=>{const t=e.target;if(t.matches("input")){let e=t.value;h=r();for(let n=0;n<h.length;n++)h[n].task===t.id&&(h[n].dueDate=e);l(h)}}))}})),document.addEventListener("keydown",(e=>{if(13===e.keyCode&&!0===p){console.log("task"),h=r(),null!=h&&0!==h||(h=[]);let e=document.getElementById("project-title").textContent;const n=document.querySelector("#task-input");let o=n.value;o=new i(o,"0",e),n.remove(),d(o.task),t(),j(),h.push(o),l(h)}})),document.querySelector("#main-content").addEventListener("click",(e=>{const t=e.target;if(t.classList.contains("todo-delete")){h=r();for(let e=0;e<h.length;e++)t.id===h[e].task&&(h.splice(e,1),t.parentElement.remove());l(h)}}))})()})();